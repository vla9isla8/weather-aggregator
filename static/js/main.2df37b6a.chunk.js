(this["webpackJsonpweatcher-aggregator"]=this["webpackJsonpweatcher-aggregator"]||[]).push([[0],{49:function(e,t,n){e.exports=n(59)},54:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=(n(54),n(12)),s=n.n(i),u=n(23),l=n(31),f=n(37),h=n(18),p=n(33),d=n(88),g=n(98),m=n(91),v=n(96),w=n(30),b=n(92),y=n(93),E=n(94),j=n(95),k=n(24),O=n(38),W=function e(t,n,a,r){Object(k.a)(this,e),this.date=t,this.tempreratureDay=n,this.tempreratureNight=a,this.description=r};function x(e,t){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(3),n.e(4)]).then(n.t.bind(null,143,7));case 2:return(r=e.sent).setLang("ru"),r.setUnits("metric"),r.setCity(t),r.setAPPID(a),e.abrupt("return",new Promise((function(e,t){return r.getWeatherForecastForDays(7,(function(n,a){n?t(n):(console.log(a),e(a))}))})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=[new(function(){function e(t){Object(k.a)(this,e),this.apiKey=t,this.name="OpenWeather"}return Object(O.a)(e,[{key:"getWeather",value:function(){var e=Object(h.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t,this.apiKey);case 3:return n=e.sent,a=n.list,e.abrupt("return",a.map((function(e){return new W(new Date(parseInt("".concat(e.dt,"000"))),e.temp.day,e.temp.night,e.weather[0].description)})));case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}())("6d0e27996f99802be89d9575a5dfb7ca")];var A=function(){var e=Object(a.useState)({}),t=Object(p.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(localStorage.getItem("city")||""),i=Object(p.a)(c,2),k=i[0],O=i[1],W=Object(a.useCallback)((function(e){var t=e.target.value;localStorage.setItem("city",t),O(t)}),[]);return Object(a.useEffect)((function(){var e=!1;return function(){var t=Object(h.a)(s.a.mark((function t(){var n,a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(f.a)(D);try{for(r=function(){var t=a.value;t.getWeather(k).then((function(n){e||o((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t.name,n||[]))}))}))},n.s();!(a=n.n()).done;)r()}catch(c){n.e(c)}finally{n.f()}case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[k]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),r.a.createElement(g.a,{display:"flex",flexDirection:"column",height:1,overflow:"hidden"},r.a.createElement(g.a,{padding:3},r.a.createElement(m.a,null,r.a.createElement(v.a,{name:"city",label:"\u0413\u043e\u0440\u043e\u0434",value:k,onChange:W}))),r.a.createElement(g.a,{flex:1,overflow:"auto"},Object.keys(n).map((function(e){return r.a.createElement(g.a,{key:e,padding:3},r.a.createElement(w.a,{variant:"h3"},e),r.a.createElement(g.a,{paddingTop:3},r.a.createElement(b.a,{container:!0,spacing:2},n[e].map((function(e,t){return r.a.createElement(b.a,{item:!0,key:t},r.a.createElement(y.a,null,r.a.createElement(E.a,{title:e.date.toLocaleDateString()}),r.a.createElement(j.a,null,r.a.createElement(w.a,{variant:"subtitle1"},e.description),r.a.createElement(w.a,{variant:"subtitle2"},"\u0414\u043d\u0435\u043c: ",e.tempreratureDay),r.a.createElement(w.a,{variant:"subtitle2"},"\u041d\u043e\u0447\u044c\u044e: ",e.tempreratureNight))))})))))})))))},C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/weather-aggregator",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/weather-aggregator","/service-worker.js");C?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):P(t,e)}))}}()}},[[49,1,2]]]);
//# sourceMappingURL=main.2df37b6a.chunk.js.map