(this["webpackJsonpweatcher-aggregator"]=this["webpackJsonpweatcher-aggregator"]||[]).push([[0],{107:function(e,t,a){"use strict";(function(e){var n=a(18),r=a.n(n),c=a(48),i=a(53),o=a(108),u=a(29),s=a(44),l=a(183),p=a(167),f=a(169),d=a(170),m=a(171),h=a(89),v=a(35),b=a(178),g=a(179),w=a(172),y=a(180),O=a(26),E=a(173),j=a(174),k=a(181),x=a(175),S=a(176),P=a(177),C=a(4),N=a(182),I=a(49),W=a.n(I),D=(a(137),a(0)),A=a.n(D),B=a(109),F=[new(a(111).a)("6d0e27996f99802be89d9575a5dfb7ca"),new B.a];W.a.locale("ru-RU");var R=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent);t.a=Object(C.a)((function(e){return Object(l.a)({root:{paddingTop:128},field:{flex:1},providerHeader:{display:"inline-block",position:"sticky",top:0,backgroundColor:e.palette.background.default,opacity:.6},weather:{position:"sticky",top:0},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},menuButton:{marginRight:e.spacing(2)}})}))((function(e){var t=e.classes,a=Object(D.useState)([]),n=Object(s.a)(a,2),l=n[0],C=n[1],I=Object(D.useState)({}),B=Object(s.a)(I,2),J=B[0],U=B[1],L=Object(D.useState)(""),M=Object(s.a)(L,2),T=M[0],$=M[1],K=Object(D.useCallback)((function(e){var t=e.target.value;localStorage.setItem("city",t),$(t)}),[]);Object(D.useEffect)((function(){var e=localStorage.getItem("selectedProviders"),t=localStorage.getItem("city");e&&U(JSON.parse(e)),t&&$(t)}),[]),Object(D.useEffect)((function(){var e={v:!1};return function(){var t=Object(u.a)(r.a.mark((function t(){var a,n,u,s,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],(n=F.filter((function(e){var t=e.name;return void 0===J[t]||J[t]}))).length>0){u=Object(o.a)(n);try{for(l=function(){var t=s.value;t.getWeather(T).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=n.reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(c.a)({},t.date.getDate(),t))}),{});a.push({data:r,provider:t.name}),e.v||C([].concat(a))}))},u.s();!(s=u.n()).done;)l()}catch(r){u.e(r)}finally{u.f()}}else C([]);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e.v=!0}}),[T,J]);var H=A.a.useState(!1),q=Object(s.a)(H,2),z=q[0],G=q[1],Q=Object(D.useCallback)((function(){G((function(e){return!e}))}),[]);Object(D.useEffect)((function(){localStorage.setItem("selectedProviders",JSON.stringify(J))}),[J]);var V=A.a.useState(W()().date()),X=Object(s.a)(V,2),Y=X[0],Z=X[1],_=Object(D.useMemo)((function(){return new Array(5).fill(null).map((function(e,t){return W()().add("day",t)}))}),[]);return A.a.createElement(A.a.Fragment,null,A.a.createElement(p.a,null),A.a.createElement(f.a,{position:"fixed"},A.a.createElement(d.a,null,A.a.createElement(m.a,{color:"inherit","aria-label":"open drawer",onClick:Q,edge:"start",className:t.menuButton},A.a.createElement(N.a,null)),A.a.createElement(h.a,{className:t.field},A.a.createElement(v.a,{paddingLeft:1,paddingRight:1},A.a.createElement(b.a,{fullWidth:!0,name:"city",label:"\u0413\u043e\u0440\u043e\u0434",value:T,onChange:K})))),A.a.createElement(v.a,{flex:1,overflow:"hidden"},A.a.createElement(g.a,{value:Y,onChange:function(e,t){return Z(t)},variant:"scrollable"},_.map((function(e){return A.a.createElement(w.a,{value:e.date(),label:e.format("dddd, L")})}))))),A.a.createElement(y.a,{disableBackdropTransition:!R,className:t.drawer,anchor:"left",open:z,onClose:Q,onOpen:Q,classes:{paper:t.drawerPaper}},A.a.createElement(v.a,{padding:1},A.a.createElement(O.a,{variant:"h6"},"\u041f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u044b"),A.a.createElement(E.a,null,F.map((function(e){var t=e.name;return A.a.createElement(j.a,{label:t,control:A.a.createElement(k.a,{name:"checked".concat(t),color:"primary",checked:void 0===J[t]||J[t],onChange:function(e,a){return U((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(c.a)({},t,a))}))}})})}))))),A.a.createElement(v.a,{className:t.root},l.map((function(e){var t=e.provider,a=e.data;return A.a.createElement(v.a,{display:"inline-block",paddingTop:1,paddingBottom:1,key:t},a[Y]&&A.a.createElement(v.a,{flex:1,padding:1},A.a.createElement(v.a,{component:x.a,height:1},A.a.createElement(S.a,{title:t}),A.a.createElement(P.a,null,A.a.createElement(O.a,{variant:"subtitle2"},"\u0414\u043d\u0435\u043c: ",A.a.createElement("b",null,a[Y].tempreratureDay,"\xb0")),A.a.createElement(O.a,{variant:"subtitle2"},"\u041d\u043e\u0447\u044c\u044e: ",A.a.createElement("b",null,a[Y].tempreratureNight,"\xb0")),A.a.createElement(O.a,{variant:"subtitle1"},a[Y].description)))))}))))}))}).call(this,a(46))},109:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(18),r=a.n(n),c=a(39),i=a(59),o=a(29),u=a(60),s=a(110),l=a.n(s);function p(e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(encodeURI("https://weather.service.msn.com/data.aspx?weasearchstr=".concat(t,"&culture=ru-RU&weadegreetype=C&src=outlook")));case 2:return a=e.sent,e.t0=l.a,e.next=6,a.text();case 6:return e.t1=e.sent,e.t2={charkey:"C$",attrkey:"A$",explicitArray:!0,mergeAttrs:!0},e.next=10,e.t0.parseStringPromise.call(e.t0,e.t1,e.t2);case 10:return n=e.sent,e.abrupt("return",n.weatherdata.weather[0]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var d=function(){function e(){Object(c.a)(this,e),this.name="MSN"}return Object(i.a)(e,[{key:"getWeather",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(t);case 3:return a=e.sent,e.abrupt("return",a.forecast.map((function(e){return new u.a(new Date(e.date[0]),parseFloat(e.high[0]),parseFloat(e.low[0]),e.skytextday[0])})));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},111:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(18),r=a.n(n),c=a(39),i=a(59),o=a(29),u=a(60);function s(e,t){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(r.a.mark((function e(t,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([a.e(3),a.e(4)]).then(a.t.bind(null,185,7));case 2:return(c=e.sent).setLang("ru"),c.setUnits("metric"),c.setCity(t),c.setAPPID(n),e.abrupt("return",new Promise((function(e,t){return c.getWeatherForecastForDays(5,(function(a,n){a?t(a):e(n)}))})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(){function e(t){Object(c.a)(this,e),this.apiKey=t,this.name="OpenWeather"}return Object(i.a)(e,[{key:"getWeather",value:function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t,this.apiKey);case 3:return a=e.sent,n=a.list,e.abrupt("return",n.map((function(e){return new u.a(new Date(parseInt("".concat(e.dt,"000"))),e.temp.day,e.temp.night,e.weather[0].description)})));case 8:return e.prev=8,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},130:function(e,t,a){e.exports=a(166)},135:function(e,t,a){},152:function(e,t){},154:function(e,t){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),i=a.n(c),o=(a(135),a(107));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(39),r=function e(t,a,r,c){Object(n.a)(this,e),this.date=t,this.tempreratureDay=a,this.tempreratureNight=r,this.description=c}}},[[130,1,2]]]);
//# sourceMappingURL=main.8cdc3be5.chunk.js.map